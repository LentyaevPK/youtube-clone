(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d9b58e6c"],{1771:function(t,e,r){var a={"./avatar.jpg":"915e","./logo.png":"cf05","./video.jpg":"6c8d"};function i(t){var e=o(t);return r(e)}function o(t){if(!r.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=o,t.exports=i,i.id="1771"},"18fd":function(t,e,r){"use strict";var a=r("b69e"),i=r.n(a);i.a},"498a":function(t,e,r){"use strict";var a=r("23e7"),i=r("58a8").trim,o=r("c8d2");a({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var a=r("1d80"),i=r("5899"),o="["+i+"]",n=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),u=function(t){return function(e){var r=String(a(e));return 1&t&&(r=r.replace(n,"")),2&t&&(r=r.replace(s,"")),r}};t.exports={start:u(1),end:u(2),trim:u(3)}},"6c8d":function(t,e,r){t.exports=r.p+"img/video.ce6ed4c8.jpg"},"915e":function(t,e,r){t.exports=r.p+"img/avatar.1b423b14.jpg"},a0ec:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form__wrapper"},[a("form",{staticClass:"upload-form",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("h2",{staticClass:"form__header"},[t._v("Добавить видео")]),a("input",{staticClass:"upload-form__file",attrs:{type:"file"},on:{input:function(e){return t.onInputVideo()}}}),t.fileUploaded?a("img",{staticClass:"upload-form__thumb",attrs:{src:r("1771")("./"+t.thumbnail)}}):t._e(),a("div",{staticClass:"form__group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form__input",attrs:{type:"text",placeholder:" "},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),a("label",{staticClass:"form__label"},[t._v("Название")])]),a("div",{staticClass:"form__group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form__input descr",attrs:{type:"text",placeholder:" "},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),a("label",{staticClass:"form__label"},[t._v("Описание")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.videoPrivacy,expression:"videoPrivacy"}],staticClass:"upload-form__select",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.videoPrivacy=e.target.multiple?r:r[0]}}},[a("option",{attrs:{value:"0"}},[t._v("Приватное")]),a("option",{attrs:{value:"1"}},[t._v("Публичное")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.videoCategory,expression:"videoCategory"}],staticClass:"upload-form__select",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.videoCategory=e.target.multiple?r:r[0]}}},[a("option",{attrs:{value:"film"}},[t._v("Фильмы")]),a("option",{attrs:{value:"auto"}},[t._v("Авто")]),a("option",{attrs:{value:"music"}},[t._v("Музыка")]),a("option",{attrs:{value:"animals"}},[t._v("Животные")]),a("option",{attrs:{value:"sports"}},[t._v("Спорт")])]),a("button",{staticClass:"form__btn",attrs:{type:"submit"}},[t._v("Добавить")])])])},i=[],o=(r("a4d3"),r("e01a"),r("498a"),r("96cf"),r("1da1")),n=r("5530"),s=r("2f62"),u={name:"VideoUpload",data:function(){return{title:"",description:"",videoPrivacy:"0",videoCategory:"film",thumbnail:"video.jpg",filePath:"",fileUploaded:!1}},computed:Object(n["a"])({isInvaild:function(){return""===this.title.trim()||""===this.description.trim()||""===this.filePath||""===this.thumbnail}},Object(s["c"])(["user","isLoggedIn"])),methods:Object(n["a"])({onInputVideo:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=event.target.files,a=new FormData,i={header:{"content-type":"multipart/form-data"}},a.append("file",r[0]),e.next=6,t.uploadFiles(a,i);case 6:o=e.sent,o.data.success?(t.filePath=o.data.filePath,t.fileUploaded=!0):(t.fileUploaded=!1,console.error("failed to upload video"));case 8:case"end":return e.stop()}}),e)})))()},onSubmit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isLoggedIn){e.next=2;break}return e.abrupt("return");case 2:if(!t.isInvaild){e.next=4;break}return e.abrupt("return");case 4:return r={writer:t.user._id,title:t.title,description:t.description,privacy:t.videoPrivacy,filePath:t.filePath,category:t.videoCategory,thumbnail:t.thumbnail},e.next=7,t.uploadVideo(r);case 7:a=e.sent,a.data.success?(console.log("video uploaded successfully"),t.$router.push("/")):console.error("failed to upload video");case 9:case"end":return e.stop()}}),e)})))()}},Object(s["b"])(["uploadFiles","createThumbnail","uploadVideo"]))},l=u,c=(r("18fd"),r("2877")),p=Object(c["a"])(l,a,i,!1,null,null,null);e["default"]=p.exports},b69e:function(t,e,r){},c8d2:function(t,e,r){var a=r("d039"),i=r("5899"),o="​᠎";t.exports=function(t){return a((function(){return!!i[t]()||o[t]()!=o||i[t].name!==t}))}},cf05:function(t,e,r){t.exports=r.p+"img/logo.82b9c7a5.png"},e01a:function(t,e,r){"use strict";var a=r("23e7"),i=r("83ab"),o=r("da84"),n=r("5135"),s=r("861d"),u=r("9bf2").f,l=r("e893"),c=o.Symbol;if(i&&"function"==typeof c&&(!("description"in c.prototype)||void 0!==c().description)){var p={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new c(t):void 0===t?c():c(t);return""===t&&(p[e]=!0),e};l(d,c);var f=d.prototype=c.prototype;f.constructor=d;var v=f.toString,m="Symbol(test)"==String(c("test")),g=/^Symbol\((.*)\)[^)]+$/;u(f,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=v.call(t);if(n(p,t))return"";var r=m?e.slice(7,-1):e.replace(g,"$1");return""===r?void 0:r}}),a({global:!0,forced:!0},{Symbol:d})}}}]);
//# sourceMappingURL=chunk-d9b58e6c.d1a3a797.js.map